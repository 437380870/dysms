# 简介 {#concept_djk_bg1_hgb .concept}

使用短信的API接口发送短信后，可以通过MNS消息队列消费模式和HTTP批量推送模式来接收短信的回执消息和上行短信内容。

如果出现网络问题等异常情况，导致消息回执未成功获取，还可以通过短信发送记录查询API接口进行一定的补偿。目前支持30天内发送记录的查询，可查询一天的发送数据。

## 消息类型 {#section_lv4_hl1_hgb .section}

短信提供2种消息类型：SmsReport（短信下行回执报告消息） 和 SmsUp（上行短信消息）。

上行短信指用户发送给通信服务提供商的短信，用于定制某种服务、完成某种查询、或是办理某种业务等。与上行短信相对应的是下行短信。下行是指用户收到的短信，例如运营商发送的消息通知、业务提醒等短信。

-   通过订阅SmsReport短信下行状态报告，可以获知每条短信的发送情况，了解短信是否达到终端用户的状态与相关信息。
-   通过订阅SmsUp上行短信消息，可以获知终端用户回复短信的内容。

## 消息发送模式 {#section_rww_kqn_jgb .section}

-   **MNS消息队列消费模式**

    -   云通信的所有业务消息都通过MNS消息服务向外发送。用户每订阅一个类别的消息（[上行短信消息（SmsUp）](cn.zh-CN/API参考/回执消息/MNS消息队列消费模式/上行短信消息（SmsUp）.md)或[短信状态报告（SmsReport）](cn.zh-CN/API参考/回执消息/MNS消息队列消费模式/短信状态报告（SmsReport）.md)），系统都会为用户分配一个独立的消息队列。
    -   用户可以通过阿里云账号拿到一个临时的Token用于获取队列中的消息。用户可以下载DEMO，编写简单的消息处理类即可完成消息处理的任务。
    -   在页面上订阅消息，订阅完消息后，能拿到消息队列名称（queueName）。比如：Alicom-Queue-xxxxxx-SmsReport 。每个用户的队列名字都不同。
-   **HTTP批量推送模式**

    通过 HTTP POST 方式发送[上行短信消息](cn.zh-CN/API参考/回执消息/HTTP批量推送模式/上行短信消息.md)或[短信状态报告](cn.zh-CN/API参考/回执消息/HTTP批量推送模式/短信状态报告.md)到指定的 Web URL，无需每次发送请求都传callback\_url。


## 开启消息接收 {#section_gm5_2dk_3gb .section}

如果需要接受回执消息，必须先在控制台上开启消息接收。

1.  登录[短信服务控制台](https://dysms.console.aliyun.com/dysms.htm)。
2.  在左侧导航栏中单击**系统设置** \> **通用设置**。
3.  在**状态报告接收**和**上行消息接收**中，开启指定模式。
    -   **MNS消息队列消费模式**表示通过MNS的Queue模型来接收短信的回执消息和上行短信内容。
    -   **HTTP批量推送模式**表示通过 HTTP POST 方式发送消息到指定的 Web URL。

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/84971/154753933135994_zh-CN.png)

